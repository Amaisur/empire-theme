<script>
  document.addEventListener('DOMContentLoaded', function() {
    var formbtn = document.querySelector(".newsletter-submit button");

    if (formbtn) {
      // Function to handle form submission
      function submitFormWithoutRefresh() {
        console.log("Form submitted without page refresh");
        // Add any additional actions or handling here
      }

      // Event listener for form button click
      formbtn.addEventListener("click", function(e) {
        e.preventDefault();
        submitFormWithoutRefresh();
      });

      // Periodically check for updates every 5 seconds (adjust as needed)
      var updateInterval = setInterval(function() {
        console.log("Checking for updates...");
        // Add logic to check for updates or perform periodic tasks here
      }, 5000); // Interval is set to 5000 milliseconds (5 seconds)

      // Stop the interval after a certain duration (optional)
      setTimeout(function() {
        clearInterval(updateInterval);
        console.log("Update interval stopped after 30 seconds");
      }, 30000); // Stop after 30 seconds (adjust as needed)
    } else {
      console.error('Button not found. Check the selector or HTML structure.');
    }
  });
</script>




{% liquid
  assign form_id = form_id | default: nil
  assign newsletter_tags = 'prospect'

  if template contains 'password'
    assign newsletter_tags = newsletter_tags | append: ', password page'
  else
    assign newsletter_tags = newsletter_tags | append: ', newsletter'
  endif

  unless input_id
    assign input_id = 'newsletter_email-' | append: section.id
  endunless
%}

<div class="newsletter">
  {% form 'customer', id: form_id %}
    {% if form.posted_successfully? %}
      <p class="newsletter-success">
        {{ 'general.newsletter.success' | t }}
      </p>
    {% else %}
      <input
        type="hidden"
        name="contact[tags]"
        value="{{ newsletter_tags }}"
      >

      <div class="form-fields-inline pxs-newsletter-form-fields">
        <div class="form-field newsletter-input">
          <input
            class="
              form-field-input
              form-field-text
            "
            type="email"
            id="{{ input_id }}"
            name="contact[email]"
            aria-label="{{ 'general.newsletter.placeholder' | t }}"
          >

          <label
            class="form-field-title"
            for="{{ input_id }}"
          >
            {{ 'general.newsletter.placeholder' | t }}
          </label>
        </div>

        <div class="form-field newsletter-submit">
          <button
            class="button-primary"
            name="subscribe"
            type="submit"
          >
            {{ 'general.newsletter.subscribe' | t }}
          </button>
        
        </div>
      </div>
    {% endif %}
  {% endform %}
</div>




